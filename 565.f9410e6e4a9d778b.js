(self.webpackChunkpd_free_angularcli=self.webpackChunkpd_free_angularcli||[]).push([[565],{9565:(_,A,d)=>{"use strict";d.r(A),d.d(A,{MyAppModule:()=>V});var w=d(9808),C=d(2382),v=d(5852),g=d(655),f=d(520),y=d(5026),t=d(4893),E=d(4327);const T=new t.OlP("saver");function o(){return E.saveAs}var a=d(6114),m=d(900),l=d(2290);let u=(()=>{class r{constructor(e,n,s,i,c){this.oauthService=e,this.http=n,this.appService=s,this.toastr=i,this.save=c,this.things=[],this.apiURL=this.appService.settings.apiURL}find(){const e=this.apiURL+"/things",n=this.getHeader();return this.http.get(e,{headers:n}).toPromise()}getProperties(e){const n=this.apiURL+"/things/"+e+"/properties",s=this.getHeader();return this.http.get(n,{headers:s}).toPromise()}findOrCreatePropertyByName(e,n,s){return(0,g.mG)(this,void 0,void 0,function*(){return this.getProperties(e).then(i=>{for(let c in i)if(i[c].name==n)return Promise.resolve(i[c]);return this.createProperty(e,{name:n,typeId:s})})})}getPropertyValues(e,n,s,i){const c=this.apiURL+"/things/"+e+"/properties/"+n,h=(new f.LE).set("from",s.from+"").set("to",s.to+"");void 0!==s.fctInterval&&h.set("fctInterval",s.fctInterval+""),void 0!==s.timeInterval&&h.set("timeInterval",s.timeInterval),void 0!==s.fill&&h.set("fill",s.fill);let U=this.getHeader();return U=U.set("Accept",i?"text/csv":"application/json"),this.http.get(c,{headers:U,params:h,responseType:"blob"}).toPromise()}createThing(e){const n=this.apiURL+"/things",s=this.getHeader();return this.http.post(n,e,{headers:s}).toPromise()}edit(e,n){const s=this.apiURL+"/things/"+e,i=this.getHeader(),c={};return void 0!==n.name&&""!==n.name&&(c.name=n.name),void 0!==n.description&&""!==n.description&&(c.description=n.description),this.http.patch(s,c,{headers:i}).toPromise()}updatePEM(e,n){const s=this.apiURL+"/things/"+e+"/pem",i=this.getHeader();return this.http.patch(s,{pem:n},{headers:i}).toPromise()}delete(e){const n=this.apiURL+"/things/"+e,s=this.getHeader();return this.http.delete(n,{headers:s}).toPromise()}grant(e,n,s,i){const c=this.apiURL+"/things/"+e+"/properties/"+n+"/consents",h=this.getHeader();return this.http.post(c,{subjects:s,actions:i},{headers:h}).toPromise()}revoke(e,n,s){const i=this.apiURL+"/things/"+e+"/properties/"+n+"/consents/"+s,c=this.getHeader();return this.http.delete(i,{headers:c}).toPromise()}createProperty(e,n){const s=this.getHeader();return this.http.post(this.apiURL+"/things/"+e+"/properties",n,{headers:s}).toPromise()}editProperty(e,n,s){const i=this.apiURL+"/things/"+e+"/properties/"+n,c=this.getHeader(),h={};return void 0!==s.name&&""!==s.name&&(h.name=s.name),void 0!==s.description&&""!==s.description&&(h.description=s.description),this.http.patch(i,h,{headers:c}).toPromise()}deleteProperty(e,n){const s=this.apiURL+"/things/"+e+"/properties/"+n,i=this.getHeader();return this.http.delete(s,{headers:i}).toPromise()}lastValues(e,n){const s=this.apiURL+"/things/"+e+"/properties/"+n+"/last",i=this.getHeader();return this.http.get(s,{headers:i}).toPromise()}dpCount(e,n){let s=this.apiURL+"/things/count?from="+e;void 0!==n&&(s+="&timeInterval="+n);const i=this.getHeader();return this.http.get(s,{headers:i}).toPromise()}sharedProperties(e="*",n,s){return(0,g.mG)(this,void 0,void 0,function*(){let i=this.apiURL+"/properties?sharedWith="+e;void 0!==n&&void 0!==s&&(i+="&from="+n+"&timeInterval="+s);const c=this.getHeader();return this.http.get(i,{headers:c}).toPromise()})}getPropertyTypes(){return(0,g.mG)(this,void 0,void 0,function*(){if(this.propertyTypes)return Promise.resolve(this.propertyTypes);const e=this.apiURL+"/types",n=this.getHeader();return yield this.http.get(e,{headers:n}).subscribe(s=>{this.propertyTypes=s},s=>{console.warn("status",s.status)}),Promise.resolve(this.propertyTypes)})}csvFileUpload(e,n,s,i){const c=this.apiURL+"/things/"+e+"/properties/"+n+"?hasLabel="+(i?"true":"false"),h=this.getHeader(),U=new FormData;return U.append("fileKey",s,s.name),this.http.put(c,U,{headers:h}).toPromise()}updatePropertyValues(e,n){const s=this.apiURL+"/things/"+e+"/properties/"+n.id,i=this.getHeader();return this.http.put(s,n,{headers:i}).toPromise()}dpiStatus(e){const n=this.apiURL+"/things/"+e+"/types/dpi",s=this.getHeader();return this.http.get(n,{headers:s}).toPromise()}dpiCreate(e,n){const s=this.apiURL+"/things/"+e+"/types/dpi",i=this.getHeader();return this.http.post(s,n,{headers:i}).toPromise()}dpiCancel(e){const n=this.apiURL+"/things/"+e+"/types/dpi/cancel",s=new f.WM({timeout:"20000"}).set("Authorization","Bearer "+this.oauthService.getAccessToken());return this.http.get(n,{headers:s}).toPromise()}dpiDelete(e){const n=this.apiURL+"/things/"+e+"/types/dpi",s=this.getHeader();return this.http.delete(n,{headers:s}).toPromise()}dpiDownload(e){const n=this.apiURL+"/things/"+e+"/types/dpi",s=this.getHeader(),i=(new f.LE).set("download","true"),c="dpi_image_"+e.replace("dcd:things:","")+".zip";return this.http.get(n,{headers:s,params:i,reportProgress:!0,observe:"events",responseType:"blob"}).pipe(function R(r){return p=>p.pipe((0,y.R)((e,n)=>{if(L(n)){let i=Math.round(100*n.loaded/1166082792);i>100&&(i=100);const c=document.getElementById("download-dpi-image-progress");return c&&(c.style.width=i+"%"),{progress:Math.round(100*n.loaded/1166082792),state:"IN_PROGRESS",content:null}}if(k(n)){r&&n.body&&r(n.body);const s=document.getElementById("downloadImage");s&&(s.disabled=!1);const i=document.getElementById("spinnerDownloadImage");i&&(i.style.display="none");const c=document.getElementById("download-dpi-image-progress-bar");return c&&(c.style.display="none"),{progress:100,state:"DONE",content:n.body}}return e},{state:"PENDING",progress:0,content:null}))}(h=>this.save(h,c)))}takeout(){const e=this.apiURL+"/takeout",n=this.getHeader();return this.http.get(e,{headers:n,reportProgress:!0,observe:"events",responseType:"blob"}).pipe(function Z(r){return p=>p.pipe((0,y.R)((e,n)=>{if(L(n)){let i=Math.round(100*n.loaded/1166082792);return i>100&&(i=100),{progress:Math.round(100*n.loaded/1166082792),state:"IN_PROGRESS",content:null}}if(k(n)){r&&n.body&&r(n.body);const s=document.getElementById("nav-progress-bar");return s&&(s.style.display="none"),{progress:100,state:"DONE",content:n.body}}return e},{state:"PENDING",progress:0,content:null}))}(i=>this.save(i,"takeout.zip")))}createGrafanaThing(e){const n=this.apiURL+"/things/"+e+"/apps/grafana",s=this.getHeader();return this.http.post(n,{},{headers:s}).toPromise()}getGrafanaId(e){const n=this.apiURL+"/things/"+e+"/apps/grafana/user",s=this.getHeader();return this.http.get(n,{headers:s}).toPromise()}getDPiHealth(){const e=this.apiURL+"/things/types/dpi/health",n=this.getHeader();return this.http.get(e,{headers:n}).toPromise()}getHeader(){return(new f.WM).set("Accept","application/json").set("Authorization","Bearer "+this.oauthService.getAccessToken())}toast(e,n="danger",s="nc-alert-circle-i"){let i="";"string"==typeof e?i=e:void 0!==e.error&&"string"!=typeof e.error?(i=e.error.name+" -- "+e.error.message,e.error.requirement&&(i+="<br>Requirement: "+e.error.requirement),e.error.hint&&(i+="<br>Hint: "+e.error.hint)):i="Bucket service unavailable.",this.toastr.info('<span data-notify="icon" class="nc-icon '+s+'"></span><span data-notify="message">'+i+"</span>","",{timeOut:4e3,closeButton:!0,enableHtml:!0,toastClass:"alert alert-"+n+" alert-with-icon",positionClass:"toast-top-center"})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(a.Ct),t.LFG(f.eN),t.LFG(m.z),t.LFG(l._W),t.LFG(T))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();function k(r){return r.type===f.dt.Response}function L(r){return r.type===f.dt.DownloadProgress||r.type===f.dt.UploadProgress}const S=[{name:"cobi",src:"https://cdn.cobi.bike/cobi.js/0.44.0/cobi.js"}];let b=(()=>{class r{constructor(){this.scripts={},S.forEach(e=>{this.scripts[e.name]={loaded:!1,src:e.src}})}load(...e){const n=[];return e.forEach(s=>n.push(this.loadScript(s))),Promise.all(n)}loadScript(e){return new Promise((n,s)=>{if(this.scripts[e].loaded)n({script:e,loaded:!0,status:"Already Loaded"});else{const i=document.createElement("script");i.type="text/javascript",i.src=this.scripts[e].src,i.onload=()=>{this.scripts[e].loaded=!0,console.log(`${e} Loaded.`),n({script:e,loaded:!0,status:"Loaded"})},i.onerror=c=>n({script:e,loaded:!1,status:"Loaded"}),document.getElementsByTagName("head")[0].appendChild(i)}})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),I=(()=>{class r{constructor(e,n,s){this.route=e,this.scriptService=n,this.bucketService=s,this.speedValues=[]}ngOnInit(){return(0,g.mG)(this,void 0,void 0,function*(){this.route.queryParams.subscribe(e=>{void 0!==e.success?this.bucketService.toast(e.success,"success"):void 0!==e.error&&this.bucketService.toast(e.error,"danger")}),this.cobiThing=yield this.getCobiThing(),console.log(this.cobiThing);for(let e=0;e<this.cobiThing.properties.length;e++)"SPEED"===this.cobiThing.properties[e].type.id&&(this.speedProperty=this.cobiThing.properties[e]);this.scriptService.load("cobi").then(()=>{COBI.init("token"),setInterval(this.sendDataToBucket.bind(this),5e3);const e=document.getElementById("speed");e.innerHTML="-",COBI.rideService.speed.subscribe(s=>{e.innerHTML=s.toFixed(2),this.speedValues.push([Date.now(),s])});const n=document.getElementById("user-power");n.innerHTML="-",COBI.rideService.userPower.subscribe(function(s){n.innerHTML=s.toFixed(2)})})})}getCobiThing(){return(0,g.mG)(this,void 0,void 0,function*(){const e=yield this.bucketService.find();for(let i=0;i<e.length;i++)if("COBI"===e[i].type)return Promise.resolve(e[i]);const s=yield this.bucketService.createThing({name:"Cobi",description:"Cobi Thing",type:"COBI"});return s.properties=[],s.properties.push(yield this.bucketService.createProperty(s.id,{typeId:"SPEED"})),Promise.resolve(s)})}sendDataToBucket(){return(0,g.mG)(this,void 0,void 0,function*(){this.speedValues.length>0&&(this.speedProperty.values=this.speedValues.slice(),this.speedValues=[],this.bucketService.updatePropertyValues(this.cobiThing.id,this.speedProperty))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(v.gz),t.Y36(b),t.Y36(u))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-dashboard-cmp"]],decls:9,vars:0,consts:[["id","speed"],["id","user-power"]],template:function(e,n){1&e&&(t.TgZ(0,"ul")(1,"li"),t._uU(2,"Speed: "),t._UZ(3,"span",0),t._uU(4," m/s"),t.qZA(),t.TgZ(5,"li"),t._uU(6,"User Power: "),t._UZ(7,"span",1),t._uU(8," m/s"),t.qZA()())},encapsulation:2}),r})();var O=d(5337);const B=function(r){return[r]};function H(r,p){if(1&r&&(t.TgZ(0,"li",8)(1,"a",9),t._UZ(2,"i"),t.TgZ(3,"p"),t._uU(4),t.qZA()()()),2&r){const e=p.$implicit;t.Tol(e.class),t.xp6(1),t.Q6J("routerLink",t.VKq(9,B,e.path)),t.xp6(1),t.MT6("nc-icon ",e.icon," ",e.type,""),t.xp6(2),t.Oqu(e.title)}}const M=[{path:"/dashboard",title:"Dashboard",icon:"nc-layout-11",class:""}];let D=(()=>{class r{constructor(e){this.bucketService=e}ngOnInit(){this.menuItems=M.filter(e=>e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(u))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-sidebar-cmp"]],decls:9,vars:1,consts:[[1,"sidebar-wrapper"],[1,"logo"],["href","./",1,"simple-text","logo-mini"],[1,"logo-image-small"],["src","./assets/img/logo.png"],["href","./",1,"simple-text","logo-normal"],[1,"nav"],["routerLinkActive","active",3,"class",4,"ngFor","ngForOf"],["routerLinkActive","active"],[3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2)(3,"div",3),t._UZ(4,"img",4),t.qZA()(),t.TgZ(5,"a",5),t._uU(6," DCD Lab Angular "),t.qZA()(),t.TgZ(7,"ul",6),t.YNc(8,H,5,11,"li",7),t.qZA()()),2&e&&(t.xp6(8),t.Q6J("ngForOf",n.menuItems))},directives:[w.sg,v.Od,v.yS],styles:[".property[_ngcontent-%COMP%]{padding-left:15px}"]}),r})();var P=d(7474);const N=["app-navbar-cmp"];let x=(()=>{class r{constructor(e,n,s,i,c,h){this.renderer=n,this.element=s,this.router=i,this.oauthService=c,this.bucketService=h,this.takeoutInProgress=!1,this.isCollapsed=!0,this.location=e,this.nativeElement=s.nativeElement,this.sidebarVisible=!1}ngOnInit(){if(this.listTitles=M.filter(n=>n),this.toggleButton=this.element.nativeElement.getElementsByClassName("navbar-toggle")[0],this.router.events.subscribe(n=>{this.sidebarClose()}),this.oauthService.hasValidAccessToken()&&this.oauthService.hasValidIdToken()){const n=this.oauthService.getIdentityClaims();this.userProfile={name:n.name,email:n.email}}}getTitle(){let e=this.location.prepareExternalUrl(this.location.path());"#"===e.charAt(0)&&(e=e.slice(1));for(let n=0;n<this.listTitles.length;n++)if(this.listTitles[n].path===e)return this.listTitles[n].title;return"Dashboard"}sidebarToggle(){!1===this.sidebarVisible?this.sidebarOpen():this.sidebarClose()}sidebarOpen(){const e=this.toggleButton,n=document.getElementsByTagName("html")[0],s=document.getElementsByClassName("main-panel")[0];setTimeout(function(){e.classList.add("toggled")},500),n.classList.add("nav-open"),window.innerWidth<991&&(s.style.position="fixed"),this.sidebarVisible=!0}sidebarClose(){const e=document.getElementsByTagName("html")[0],n=document.getElementsByClassName("main-panel")[0];window.innerWidth<991&&setTimeout(function(){n.style.position=""},500),this.toggleButton.classList.remove("toggled"),this.sidebarVisible=!1,e.classList.remove("nav-open")}collapse(){this.isCollapsed=!this.isCollapsed;const e=document.getElementsByTagName("nav")[0];this.isCollapsed?(e.classList.add("navbar-transparent"),e.classList.remove("bg-white")):(e.classList.remove("navbar-transparent"),e.classList.add("bg-white"))}logout(){this.oauthService.logOut(),this.oauthService.revokeTokenAndLogout()}editProfile(){window.open("https://dwd.tudelft.nl/profile","_blank").focus()}takeout(){console.log("takeout");const e=document.getElementById("nav-spinner");e.style.display="block",this.takeoutInProgress?console.log("ignoring takeout, already ongoing"):(this.takeoutInProgress=!0,this.download$=this.bucketService.takeout(),this.download$.subscribe(n=>{"PENDING"===n.state||"DONE"===n.state&&(e.style.display="none",this.takeoutInProgress=!1,this.bucketService.toast("Takeout ready.","success","nc-single-copy-04"))},n=>{this.takeoutInProgress=!1,e.style.display="none",this.bucketService.toast("Takeout failed.","danger","nc-single-copy-04")}))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(w.Ye),t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(v.F0),t.Y36(a.Ct),t.Y36(u))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-navbar-cmp"]],viewQuery:function(e,n){if(1&e&&t.Gf(N,5),2&e){let s;t.iGM(s=t.CRH())&&(n.button=s.first)}},decls:53,vars:5,consts:[[1,"navbar","navbar-expand-lg","navbar-absolute","fixed-top","navbar-transparent"],[1,"container-fluid"],[1,"navbar-wrapper"],[1,"navbar-toggle"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-bar","bar1"],[1,"navbar-toggler-bar","bar2"],[1,"navbar-toggler-bar","bar3"],["href","javascript:void(0)",1,"navbar-brand"],["type","button","aria-controls","collapseExample",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-bar","navbar-kebab"],["id","collapseExample",1,"collapse","navbar-collapse","justify-content-end",3,"ngbCollapse"],["id","nav-progress-bar",1,"progress",2,"display","none"],["id","nav-progress","role","progressbar",1,"progress-bar","progress-bar-info"],["id","nav-spinner",1,"spinner",2,"display","none"],[1,"rect1"],[1,"rect2"],[1,"rect3"],[1,"rect4"],[1,"rect5"],[1,"navbar-nav"],["ngbDropdown","","placement","bottom-left",1,"nav-item","btn-rotate"],["ngbDropdownToggle","","id","navbarDropdownMenuLink",1,"nav-link"],[1,"nc-icon","nc-single-02"],[1,"d-lg-none","d-md-block"],["ngbDropdownMenu","","aria-labelledby","navbarDropdownMenuLink",1,"dropdown-menu","dropdown-menu-right"],["ngbDropdownItem",""],[1,"nc-icon","nc-email-85"],[1,"dropdown-divider"],["ngbDropdownItem","","id","download-takeout",3,"click"],[1,"nc-icon","nc-cloud-download-93"],["ngbDropdownItem","",3,"click"],[1,"nc-icon","nc-settings-gear-65"],[1,"nc-icon","nc-simple-remove"],[1,"nav-item"],["href","./","target","_blank","alt","Help","title","Help",1,"nav-link","btn-rotate"],[1,"nc-icon","nc-support-17"]],template:function(e,n){1&e&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return n.sidebarToggle()}),t._UZ(5,"span",5)(6,"span",6)(7,"span",7),t.qZA()(),t.TgZ(8,"a",8),t._uU(9),t.qZA()(),t.TgZ(10,"button",9),t.NdJ("click",function(){return n.collapse()}),t._UZ(11,"span",10)(12,"span",10)(13,"span",10),t.qZA(),t.TgZ(14,"div",11)(15,"div",12),t._UZ(16,"div",13),t.qZA(),t.TgZ(17,"div",14),t._UZ(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",18)(22,"div",19),t.qZA(),t.TgZ(23,"ul",20)(24,"li",21)(25,"a",22),t._UZ(26,"i",23),t.TgZ(27,"p")(28,"span",24),t._uU(29,"User"),t.qZA()()(),t.TgZ(30,"div",25)(31,"a",26),t._UZ(32,"i",23),t._uU(33),t.qZA(),t.TgZ(34,"a",26),t._UZ(35,"i",27),t._uU(36),t.qZA(),t._UZ(37,"div",28),t.TgZ(38,"a",29),t.NdJ("click",function(){return n.takeout()}),t._UZ(39,"i",30),t._uU(40," Takeout "),t.qZA(),t.TgZ(41,"a",31),t.NdJ("click",function(){return n.editProfile()}),t._UZ(42,"i",32),t._uU(43," Profile Settings "),t.qZA(),t.TgZ(44,"a",31),t.NdJ("click",function(){return n.logout()}),t._UZ(45,"i",33),t._uU(46," Log out "),t.qZA()()(),t.TgZ(47,"li",34)(48,"a",35),t._UZ(49,"i",36),t.TgZ(50,"p")(51,"span",24),t._uU(52,"Help"),t.qZA()()()()()()()()),2&e&&(t.xp6(9),t.Oqu(n.getTitle()),t.xp6(1),t.uIk("aria-expanded",!n.isCollapsed),t.xp6(4),t.Q6J("ngbCollapse",n.isCollapsed),t.xp6(19),t.hij(" ",n.userProfile.name," "),t.xp6(3),t.hij(" ",n.userProfile.email," "))},directives:[P.M2,P._D,P.jt,P.iD,P.Vi,P.TH],styles:[".progress[_ngcontent-%COMP%]{height:5px;width:300px}.progress-bar-info[_ngcontent-%COMP%]{background-color:#51bcda}.progress-bar-danger[_ngcontent-%COMP%]{background-color:#ef8157}.spinner[_ngcontent-%COMP%]{width:50px;height:10px;text-align:center;display:inline-block}.spinner[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#000;height:100%;width:4px;margin:0 1px;display:inline-block;-webkit-animation:sk-stretchdelay 1.2s infinite ease-in-out;animation:sk-stretchdelay 1.2s infinite ease-in-out}.spinner[_ngcontent-%COMP%]   .rect2[_ngcontent-%COMP%]{-webkit-animation-delay:-1.1s;animation-delay:-1.1s}.spinner[_ngcontent-%COMP%]   .rect3[_ngcontent-%COMP%]{-webkit-animation-delay:-1s;animation-delay:-1s}.spinner[_ngcontent-%COMP%]   .rect4[_ngcontent-%COMP%]{-webkit-animation-delay:-.9s;animation-delay:-.9s}.spinner[_ngcontent-%COMP%]   .rect5[_ngcontent-%COMP%]{-webkit-animation-delay:-.8s;animation-delay:-.8s}"]}),r})();var F=d(5227);let G=v.Bz.forChild([{path:"",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-myapp"]],decls:8,vars:0,consts:[[1,"wrapper"],["data-color","white","data-active-color","danger",1,"sidebar"],[1,"main-panel"],[1,"content"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-sidebar-cmp"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"app-navbar-cmp"),t.TgZ(5,"div",3),t._UZ(6,"router-outlet"),t.qZA(),t._UZ(7,"app-footer-cmp"),t.qZA()())},directives:[D,x,v.lC,F.c],styles:[""]}),r})(),canActivate:[O.a],children:[{path:"",component:I}]}]),V=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[u,b,{provide:T,useFactory:o}],imports:[[w.ez,C.u5,P.IJ,C.UX,G]]}),r})()},4327:function(_,A){var C;void 0!==(C=function(){"use strict";function g(o,a,m){var l=new XMLHttpRequest;l.open("GET",o),l.responseType="blob",l.onload=function(){T(l.response,a,m)},l.onerror=function(){console.error("could not download file")},l.send()}function f(o){var a=new XMLHttpRequest;a.open("HEAD",o,!1);try{a.send()}catch(m){}return 200<=a.status&&299>=a.status}function y(o){try{o.dispatchEvent(new MouseEvent("click"))}catch(m){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(a)}}var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,E=t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),T=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype&&!E?function(o,a,m){var l=t.URL||t.webkitURL,u=document.createElement("a");u.download=a=a||o.name||"download",u.rel="noopener","string"==typeof o?(u.href=o,u.origin===location.origin?y(u):f(u.href)?g(o,a,m):y(u,u.target="_blank")):(u.href=l.createObjectURL(o),setTimeout(function(){l.revokeObjectURL(u.href)},4e4),setTimeout(function(){y(u)},0))}:"msSaveOrOpenBlob"in navigator?function(o,a,m){if(a=a||o.name||"download","string"!=typeof o)navigator.msSaveOrOpenBlob(function v(o,a){return void 0===a?a={autoBom:!1}:"object"!=typeof a&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\ufeff",o],{type:o.type}):o}(o,m),a);else if(f(o))g(o,a,m);else{var l=document.createElement("a");l.href=o,l.target="_blank",setTimeout(function(){y(l)})}}:function(o,a,m,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),"string"==typeof o)return g(o,a,m);var u="application/octet-stream"===o.type,R=/constructor/i.test(t.HTMLElement)||t.safari,Z=/CriOS\/[\d]+/.test(navigator.userAgent);if((Z||u&&R||E)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var b=k.result;b=Z?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=b:location=b,l=null},k.readAsDataURL(o)}else{var L=t.URL||t.webkitURL,S=L.createObjectURL(o);l?l.location=S:location.href=S,l=null,setTimeout(function(){L.revokeObjectURL(S)},4e4)}});t.saveAs=T.saveAs=T,_.exports=T}.apply(A,[]))&&(_.exports=C)}}]);